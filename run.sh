#!/bin/bash

# Script ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ Ollama UI

echo "๐ ุฏุฑ ุญุงู ุฑุงูโุงูุฏุงุฒ Ollama UI..."

# ุจุฑุฑุณ ูุฌูุฏ ูุญุท ูุฌุงุฒ
if [ ! -d "venv" ]; then
    echo "๐ฆ ุงุฌุงุฏ ูุญุท ูุฌุงุฒ..."
    python3 -m venv venv
fi

# ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ
echo "๐ง ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ..."
source venv/bin/activate

# ูุตุจ ูุงุจุณุชฺฏโูุง
echo "๐ฅ ูุตุจ ูุงุจุณุชฺฏโูุง..."
pip install -q -r requirements.txt

# ุจุฑุฑุณ ุงุฌุฑุง Ollama
echo "๐ ุจุฑุฑุณ Ollama..."
if ! curl -s http://localhost:11434/api/tags > /dev/null 2>&1; then
    echo "โ๏ธ  ูุดุฏุงุฑ: ุจู ูุธุฑ ูโุฑุณุฏ Ollama ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุช."
    echo "   ูุทูุงู Ollama ุฑุง ุจุง ุฏุณุชูุฑ 'ollama serve' ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ."
    echo ""
fi

# ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ
echo "โ ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ..."
echo "๐ ุณุฑูุฑ ุฏุฑ ุขุฏุฑุณ http://localhost:8000 ุฏุฑ ุฏุณุชุฑุณ ุงุณุช"
echo ""
python main.py
